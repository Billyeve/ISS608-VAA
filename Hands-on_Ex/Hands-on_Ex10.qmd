---
title: "Hands-on Exercise 10"
subtitle: "Financial Data Visualisation and Analysis"
---

## **Overview**

By the end of this hands-on exercise, you will be able to:

-   extract stock price data from financial portal such as Yahoo Finance by using tidyquant package

-   plot horizon graph by using ggHoriPlot package,

-   plot static and interactive stock prices line graph(s) by ggplot2 and plotly R packages,

-   plot static candlestick chart by using tidyquant package,

-   plot static bollinger bands by using tidyquant, and

-   plot interactive candlestick chart by using ggplot2 and plotly R.

## **Getting started**

For the purpose of this hands-on exercise, the following R packages will be used.

```{r}
pacman::p_load(lubridate, tidyquant, ggHoriPlot,
               timetk, ggthemes, plotly, tidyverse)
```

-   [tidyverse](https://www.tidyverse.org/) provides a collection of functions for performing data science task such as importing, tidying, wrangling data and visualising data. It is not a single package but a collection of modern R packages including but not limited to [readr](https://readr.tidyverse.org/), [tidyr](https://tidyr.tidyverse.org/), [dplyr](https://dplyr.tidyverse.org/), [ggplot](https://ggplot2.tidyverse.org/), [tibble](https://tibble.tidyverse.org/), [stringr](https://stringr.tidyverse.org/), [forcats](https://forcats.tidyverse.org/) and [purrr](https://purrr.tidyverse.org/).

-   [lubridate](https://isss608-ay2022-23jan.netlify.app/hands-on_ex/hands-on_ex10/hands-on_ex10-finvis) provides functions to work with dates and times more efficiently.

-   [tidyquant](https://business-science.github.io/tidyquant/) bringing business and financial analysis to the \'tidyverse\'. It provides a convenient wrapper to various \'xts\', \'zoo\', \'quantmod\', \'TTR\' and \'PerformanceAnalytics\' package functions and returns the objects in the tidy \'tibble\' format.

-   [ggHoriPlot](https://rivasiker.github.io/ggHoriPlot/): A user-friendly, highly customisable R package for building horizon plots in the \'ggplot2\' environment.

## **Data Extraction with tidyquant**

*tidyquant* integrates resources for collecting and analysing financial data with the tidy data infrastructure of the tidyverse, allowing for seamless interaction between each.

In this section, you will learn how to extract the daily stock values of a selected stocks from [Yahoo Finance](https://sg.finance.yahoo.com/?guccounter=1&guce_referrer=aHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS8&guce_referrer_sig=AQAAAHa98gxRGd7UR5U5CBJQrzOlGe7GebuoJHwAnhfZteZFhvBCGYuLXElRR4e1jYMKNVAfoTkxZywJqXNn70g1lsXCL4GV5S1iHwV4MK3pKg8H33FHqCteh3jXuTKvpx1sZCOe_tlooJkLH9Odhgj1OV72vk3eRsCgzUeGb6zDxqOe) by using tidyquant.

**Step 1:** We will import a pre-prepared company list called **companySG.csv** onto R. The list consists of top 45 companies by market capitalisation in Singapore. However, we just want the top 40.

```{r}
company <- read_csv("data/companySG.csv")
Top40 <- company %>% 
  slice_max(`marketcap`, n=40) %>% 
  select(symbol)
```
